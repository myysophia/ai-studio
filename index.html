<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Studio: 高效构建定制化平台项目计划</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path fill='%233a86ff' d='M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z'/></svg>">

    <style>
        /* --- 现代简洁风格 CSS --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .container {
            max-width: 1100px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        header {
            background-color: #0056b3; /* 深蓝色调 */
            color: #ffffff;
            padding: 25px 20px;
            border-radius: 8px 8px 0 0;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 2.2em;
            font-weight: 600;
        }
        header p {
            margin-top: 5px;
            font-size: 1.1em;
            opacity: 0.9;
        }
        nav {
            background-color: #e9ecef;
            padding: 10px 0;
            text-align: center;
            border-bottom: 1px solid #4b6075;
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: #fff; /* Add background for sticky */
        }
        nav a {
            text-decoration: none;
            color: #0056b3;
            margin: 0 15px;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        nav a:hover, nav a.active {
            background-color: #0056b3;
            color: #ffffff;
        }
        section {
            padding: 30px 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        section:last-child {
            border-bottom: none;
        }
        h2 {
            color: #0056b3;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 8px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #17a2b8; /* 青色调 */
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        ul {
            list-style-type: none;
            padding-left: 0;
        }
        li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        li::before {
            content: '✓'; /* Use checkmark or other icon */
            color: #28a745; /* Green */
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .risk li::before {
            content: '⚠️'; /* Warning sign for risks */
            color: #dc3545; /* Red */
        }
        .advantage li::before {
             content: '⭐'; /* Star for advantages */
            color: #ffc107; /* Yellow */
        }

        /* --- 表格样式 --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px 15px;
            text-align: left;
        }
        th {
            background-color: #e9ecef;
            font-weight: 600;
            color: #495057;
        }
        tbody tr:nth-child(odd) {
            background-color: #f8f9fa;
        }
        tbody tr:hover {
            background-color: #e2e6ea;
            cursor: pointer; /* Indicate interactivity */
        }
        .priority-high { font-weight: bold; color: #dc3545; }
        .priority-medium { font-weight: bold; color: #fd7e14; }
        .priority-low { color: #6c757d; }

        /* --- 里程碑时间线 (简单 CSS 实现) --- */
        .timeline {
            position: relative;
            margin: 30px 0;
            padding: 10px 0;
        }
        .timeline::before { /* The vertical line */
            content: '';
            position: absolute;
            top: 0;
            left: 10px; /* Adjust based on icon/marker size */
            height: 100%;
            width: 4px;
            background: #dee2e6;
        }
        .milestone {
            position: relative;
            margin-bottom: 20px;
            padding-left: 40px; /* Space for line and marker */
        }
        .milestone::before { /* The marker on the line */
            content: '';
            position: absolute;
            left: 2px; /* Adjust to center on the line */
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #0056b3;
            border: 3px solid #fff;
            box-shadow: 0 0 0 2px #0056b3;
            z-index: 1;
        }
        .milestone span {
            font-weight: bold;
            display: block;
            color: #0056b3;
        }
        .milestone p { margin-top: 5px; }

        /* --- 竞品对比图 (简单条形图占位) --- */
        .comparison-chart {
          /* Placeholder - In real implementation, use Chart.js or similar */
          border: 1px solid #ccc; padding: 20px; text-align: center;
          background-color: #f0f0f0; margin-top: 20px; font-style: italic;
        }

        /* 添加时钟样式 */
        #clock {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 1.1em;
            font-weight: 500;
            color: #0056b3;
            z-index: 1000;
            text-align: center;
            line-height: 1.4;
        }
        #clock .date {
            font-size: 0.9em;
            display: block;
            border-bottom: 1px solid rgba(0, 86, 179, 0.2);
            margin-bottom: 5px;
            padding-bottom: 5px;
        }
        #clock .time {
            display: block;
            font-size: 1.1em;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 15px;
            font-size: 0.9em;
            color: #6c757d;
            border-top: 1px solid #eee;
        }
    </style>
    
</head>
<body>
    <!-- 添加时钟 div -->
    <div id="clock">
        <span class="date"></span>
        <span class="time"></span>
    </div>

    <header>
        <h1>AI Studio: 高效构建定制化 AI station 平台</h1>
        <p>项目计划汇报 - 旨在提升 AI 研发效率与资源利用率</p>
    </header>

    <nav>
        <a href="#intro">项目简介</a>
        <a href="#feasibility">可行性分析</a>
        <a href="#comparison">竞品分析</a>
        <a href="#plan">详细开发计划</a>
        <a href="#summary">总结与价值</a>
    </nav>

    <div class="container">

        <section id="intro">
            <h2>项目简介</h2>
            <p>基于浪潮AI station平台，解决 AI 软硬件交付一体化问题，在模型开发、训练、部署过程中遇到的效率瓶颈和资源管理难题，经彭总提议启动"AI Studio"项目。本项目旨在<strong>基于成熟的开源AI studio平台进行二次开发</strong>，快速构建一个符合我司特定需求的、统一的 AI 工作平台。</p>
            <p><strong>核心目标：</strong></p>
            <ul>
                <li><strong>提升效率：</strong> 提供统一的 Jupyter、Web Shell 环境，简化开发调试。</li>
                <li><strong>自动化流程：</strong> 实现任务编排，自动化模型训练、评估等复杂流程。</li>
                <li><strong>优化资源：</strong> 实现 GPU 等核心资源的灵活调度与精细化管理，提高利用率。</li>
                <li><strong>数据洞察：</strong> 提供资源监控与使用报表，支撑成本核算与优化决策。</li>
                <li><strong>支持k8s设施：</strong> 对接 Kubernetes 集群、NFS 存储和 InfiniBand 网络。</li>
            </ul>
            <p><strong>开发策略：</strong></p>
            <ul>
                <li><strong>后端开发 + AI 辅助：</strong> 由我（熟悉 K8s、后端开发）负责主要开发 + 一个后端辅助开发同事 + 借助 Cursor、ChatGPT/Gemini 等 AI 工具加速编码、调试和文档工作。</li>
                <li><strong>时间周期：</strong> 预计 <strong>4 -5个月</strong>完成核心功能开发与上线。</li>
                <li><strong>成本效益：</strong> 充分利用开源社区成果，极大降低自研成本和时间投入。</li>
            </ul>
            <p><strong>功能优先级：</strong> <span class="priority-high">GPU 调度</span> > <span class="priority-medium">任务编排</span> > <span class="priority-medium">Jupyter</span> > 其他</p>
        </section>

        <section id="feasibility">
            <h2>可行性分析</h2>
            <p>基于成熟开源项目进行二次开发，是构建我们 AI Studio 平台最高效、风险可控的路径。</p>
            <h3>技术可行性</h3>
            <ul>
                <li><strong>基础架构成熟：</strong> 基于 Kubernetes (K8s) 集群，为部署 K8s 原生的 AI station 平台提供了坚实基础。</li>
                <li><strong>核心功能覆盖：</strong> 现有的顶级开源 AI station 项目（如 Kubeflow）已包含大部分核心需求（Jupyter、任务编排、GPU 支持、账号管理等），二次开发主要聚焦于定制、集成和优化。</li>
                <li><strong>开发者能力匹配：</strong> 熟悉 K8s 运维与开发*2，能够承担基础平台的部署、配置和二次开发工作。</li>
                <li><strong>AI 工具赋能：</strong> 利用 AI 编程助手能显著提高单人开发效率，处理代码生成、问题排查、文档撰写等任务，使得 4-5 个月周期成为可能。</li>
            </ul>
            <h3>优势 (Advantages)</h3>
            <ul class="advantage">
                <li><strong>开发速度快：</strong> 大幅缩短研发周期，避免"重复造轮子"。</li>
                <li><strong>成本效益高：</strong> 显著降低研发投入，主要成本在于开发人力和少量云资源。</li>
                <li><strong>功能起点高：</strong> 直接获得业界验证的成熟功能，稳定性有保障。</li>
                <li><strong>社区支持强：</strong> 可利用活跃的开源社区资源解决技术难题。</li>
                <li><strong>专注核心定制：</strong> 可将精力集中在最符合我们业务需求的定制化功能上。</li>
            </ul>
            <h3>风险与应对 (Risks)</h3>
            <ul class="risk">
                <li><strong>开源项目复杂度：</strong> Kubeflow 等平台本身较复杂，学习曲线陡峭。(应对：聚焦核心组件，利用 AI 工具辅助理解和调试)</li>
                <li><strong>集成难度：</strong> 将我们特定的需求（如精细化报表、特定 IB 网络配置）与开源平台融合可能遇到挑战。(应对：优先保障核心功能，复杂集成点分阶段实现，保持配置灵活性)</li>
                <li><strong>上游版本依赖：</strong> 基础平台的更新可能带来兼容性问题。(应对：选择 LTS 或稳定版本，谨慎跟进升级，做好兼容性测试)</li>
                <li><strong>人力风险：</strong> 开发属于兼职开发，可能成为瓶颈。(应对：充分利用 AI 工具，文档记录清晰，核心功能优先，争取内部或临时资源支持)</li>
                <li><strong>定制化维护成本：</strong> 过度定制可能导致后续维护困难。(应对：遵循开源项目扩展规范，代码模块化，减少对核心代码的侵入式修改)</li>
            </ul>
        </section>

        <section id="comparison">
            <h2>竞品分析：选择最佳开源基石</h2>
            <p>我对比了几个主流的开源 AI station 平台，以选择最适合二次开发的基石：</p>
            <table>
                <thead>
                    <tr>
                        <th>评估维度</th>
                        <th>Kubeflow</th>
                        <th>MLRun (Iguazio)</th>
                        <th>Flyte (Lyft/Union AI)</th>
                        <th>"AI Studio"定位 (基于 Kubeflow 定制)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>核心功能覆盖</strong><br>(Jupyter, 编排, GPU, 账号, 资源, NFS/IB*)</td>
                        <td><strong>非常全面</strong>，组件化提供几乎所有需求功能。*IB需K8s配置</td>
                        <td><strong>较全面</strong>，强项在 Serverless Function 和 Feature Store 集成。*IB需K8s配置</td>
                        <td><strong>任务编排是强项</strong>，类型安全，可复现性好。其他功能需集成。*IB需K8s配置</td>
                        <td><strong class="priority-high">继承 Kubeflow 全面功能</strong>，并针对性强化 GPU 调度可视化、资源报表和易用性。</td>
                    </tr>
                    <tr>
                        <td><strong>社区活跃度</strong></td>
                        <td><strong>非常高</strong>，Google 发起，CNCF 孵化项目，贡献者众多。</td>
                        <td><strong>中等</strong>，主要由 Iguazio 推动，社区在增长。</td>
                        <td><strong>高</strong>，CNCF 毕业项目，社区活跃，文档优秀。</td>
                        <td><strong class="priority-medium">受益于 Kubeflow 庞大社区</strong>，降低技术支持风险。</td>
                    </tr>
                    <tr>
                        <td><strong>部署复杂性</strong></td>
                        <td><strong>高</strong>，组件多，依赖复杂，有多种发行版。</td>
                        <td><strong>中等</strong>，相对 Kubeflow 可能稍简单，但仍需 K8s 专业知识。</td>
                        <td><strong>中等</strong>，核心部署相对清晰，但整体生态集成也需投入。</td>
                        <td><strong class="priority-medium">初期复杂性同 Kubeflow</strong>，但通过定制简化常用操作入口。</td>
                    </tr>
                    <tr>
                        <td><strong>扩展性/定制化</strong></td>
                        <td><strong>高</strong>，微服务架构，API 丰富，适合二次开发和定制。</td>
                        <td><strong>高</strong>，设计考虑扩展性，提供 SDK 和 API。</td>
                        <td><strong>高</strong>，插件化设计，易于扩展后端和添加新类型。</td>
                        <td><strong class="priority-high">利用 Kubeflow 的高扩展性</strong>，按需定制 UI、调度策略和报表。</td>
                    </tr>
                </tbody>
            </table>
            <div class="comparison-chart">
                <img src="https://pub-10375556b89a45e0a56aff68854a2214.r2.dev/leida.png" alt="AI station平台对比雷达图" style="max-width: 100%; height: auto; margin: 20px 0;">
                <p><strong>结论：</strong> <strong>Kubeflow</strong> 在功能全面性、社区支持和扩展性方面综合最佳，虽然部署复杂，但其 K8s 原生特性、对我们所需功能的广泛覆盖使其成为二次开发的最优选择。AI Studio 将在其基础上进行精简和定制，扬长避短。</p>
            </div>
        </section>

        <section id="plan">
            <h2>详细二次开发项目计划</h2>
            <p>以下是基于 Kubeflow 进行二次开发的详细计划，已考虑功能优先级和 AI 工具辅助：</p>

            <h3>环境配置要求</h3>
            <div style="overflow-x:auto;">
            <table>
                <thead>
                    <tr>
                        <th>配置项</th>
                        <th>要求</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>推荐操作系统</strong></td>
                        <td>
                            <strong>Ubuntu LTS (22.04, 20.04)</strong><br>
                            <em>优势：</em>
                            <ul style="margin: 5px 0;">
                                <li><strong>兼容性极佳：</strong> K8s 社区事实上的主流选择之一，云原生生态支持非常好。</li>
                                <li><strong>硬件驱动友好：</strong> NVIDIA 官方对 Ubuntu 的支持通常最及时、最完善，安装 CUDA Toolkit 相对简单。昇腾对 Ubuntu 的支持也比较好。</li>
                                <li><strong>社区庞大：</strong> 遇到问题容易找到解决方案，文档丰富。</li>
                                <li><strong>软件包新：</strong> LTS 版本能较好地平衡稳定性和软件包的新旧程度，适合 AI/ML 工具链。</li>
                                <li><strong>LTS 支持：</strong> 提供 5 年标准安全维护，满足稳定性要求。</li>
                                <li><strong>IB/NFS 支持良好。</strong></li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Docker 版本</strong></td>
                        <td>≥ 19.03</td>
                    </tr>
                    <tr>
                        <td><strong>Kubernetes 版本</strong></td>
                        <td>1.24 ~ 1.28</td>
                    </tr>
                    <tr>
                        <td><strong>kubectl 版本</strong></td>
                        <td>1.24</td>
                    </tr>
                    <tr>
                        <td><strong>存储要求</strong></td>
                        <td>cfs/ceph 需挂载到每台机器的 /data/k8s/</td>
                    </tr>
                    <tr>
                        <td><strong>单机磁盘容量</strong></td>
                        <td>≥ 300G（仅做镜像容器的存储，容量要求不大）</td>
                    </tr>
                    <tr>
                        <td><strong>控制端配置</strong></td>
                        <td>CPU ≥ 16核，内存 ≥ 32G</td>
                    </tr>
                    <tr>
                        <td><strong>任务端配置</strong></td>
                        <td>CPU ≥ 32核，内存 ≥ 64G</td>
                    </tr>
                    <tr>
                        <td><strong>网络要求</strong></td>
                        <td>需要科学上网<br>ssh端口需开放给：113.200.54.58/120.192.215.66</td>
                    </tr>
                </tbody>
            </table>
            </div>

            <h3>任务分解与每周排期 (预计 18 周)</h3>
            <div style="overflow-x:auto;"> <!-- Make table horizontally scrollable on small screens -->
            <table>
                <thead>
                    <tr>
                        <th>周次</th>
                        <th>核心任务</th>
                        <th>主要产出/目标</th>
                        <th>优先级/涉及功能</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>W1-W2</td>
                        <td>需求确认、环境准备 & Kubeflow 基础部署</td>
                        <td>明确需求目标、K8s 集群就绪 (GPU/NFS/IB 验证), 选用稳定版 Kubeflow 核心组件安装成功，基础访问验证。</td>
                        <td><span class="priority-high">基础设施</span></td>
                    </tr>
                    <tr>
                        <td>W3-W4</td>
                        <td>核心组件熟悉 & 认证集成</td>
                        <td>深入理解 Kubeflow Notebooks, Pipelines, RBAC (权限)。</td>
                        <td><span class="priority-medium">账号管理</span>, Jupyter, 任务编排</td>
                    </tr>
                    <tr>
                        <td>W5-W6</td>
                        <td><strong>GPU 调度验证与定制调研</strong></td>
                        <td>确保 Pod 能请求并使用 GPU。调研 K8s Device Plugin (Nvidia/Ascend*) 和 Kubeflow 调度策略。调研监控指标。(*若涉及昇腾)</td>
                        <td><span class="priority-high">GPU 调度</span>, 资源管理</td>
                    </tr>
                     <tr>
                        <td>W7-W8</td>
                        <td><strong>任务编排 (Pipelines) 实践</strong></td>
                        <td>能通过 UI 或 SDK 定义、运行、监控简单的训练 Pipeline (至少包含数据处理、训练、评估步骤)。验证 NFS 访问。</td>
                        <td><span class="priority-high">任务编排</span>, NFS/IB(依赖:集群中至少有2台具有RDMA网络的GPU实例。)</td>
                    </tr>
                    <tr>
                        <td>W9-W10</td>
                        <td><strong>Jupyter & Web Shell 集成优化</strong></td>
                        <td>确保 Jupyter 环境稳定易用，镜像管理。集成或优化 Web Shell 访问功能 (如集成到 Notebook 或提供独立入口)。</td>
                        <td><span class="priority-medium">Jupyter</span>, Web Shell</td>
                    </tr>
                     <tr>
                        <td>W11-W12</td>
                        <td><strong>GPU 调度 & 资源管理定制开发 (前端/后端)</strong></td>
                        <td>开发或定制 UI 界面，简化 GPU 选择、监控。实现基本的资源配额展示或限制 (基于 Namespace)。</td>
                        <td><span class="priority-high">GPU 调度</span>, 资源管理</td>
                    </tr>
                     <tr>
                        <td>W13-W14</td>
                        <td><strong>资源监控与报表开发 (初步)</strong></td>
                        <td>集成 Prometheus/Grafana (若 Kubeflow 未带) 或利用其数据。开发基础的 GPU/CPU/内存使用率报表 (按用户/项目)。</td>
                        <td><span class="priority-low">资源监控报表</span></td>
                    </tr>
                    <tr>
                        <td>W15</td>
                        <td>整合测试 & 性能调优</td>
                        <td>端到端测试核心流程。压力测试关键组件。修复 Bug。</td>
                        <td><span class="priority-high">整体功能</span></td>
                    </tr>
                    <tr>
                        <td>W16-W18</td>
                        <td>文档编写 & 内部发布 (Alpha)</td>
                        <td>编写用户手册、运维文档。部署到预生产环境，进行小范围内部试用。</td>
                        <td><span class="priority-low">文档</span>, 部署</td>
                    </tr>
                </tbody>
            </table>
            </div>

            <h3>项目风险评估</h3>
            <ul class="risk">
                <li><strong>技术难点超预期：</strong> 特别是 IB 网络深度集成或复杂调度策略定制。(应对：保持方案灵活性，优先保障核心网络可达和基本调度，复杂功能放后期迭代)</li>
                <li><strong>AI 工具效率未达预期：</strong> 过分依赖 AI 可能导致进度延误。(应对：合理分配时间，复杂逻辑部分仍需人工深度参与，定期评估 AI 辅助效果)</li>
                <li><strong>需求蔓延：</strong> 项目过程中新增非核心需求。(应对：严格管理需求范围，聚焦本期核心目标，新需求放入后续迭代计划)</li>
                <li><strong>开源组件 Bug：</strong> 遇到基础平台或依赖库的 Bug。(应对：积极查找社区解决方案或 Workaround，必要时向上游报告)</li>
            </ul>
        </section>

        <section id="summary">
            <h2>总结与战略价值</h2>
            <p>通过"AI Studio"项目，我们能在 <strong>4-5 个月内，以极具竞争力的成本（基于开源二开方案）</strong>，构建一个强大的、定制化的 AI station 平台。这将：</p>
            <ul>
                <li><strong>显著提升 AI 研发效率：</strong> 缩短模型从开发到上线的周期。</li>
                <li><strong>最大化资源价值：</strong> 特别是昂贵的 GPU 资源，通过精细化调度和监控提高利用率，降低成本。</li>
                <li><strong>赋能 AI 团队：</strong> 提供统一、易用的工作环境，让研究员和工程师更专注于算法创新。</li>
                <li><strong>奠定未来基础：</strong> 为后续更复杂的 AI station 功能（如模型服务、特征存储等）打下坚实基础。</li>
            </ul>
            <p>本项目技术可行性高，风险可控，战略价值明确。借助开源力量和 AI 工具，我们有信心达成目标，为公司的 AI 发展注入强大动力！</p>
        </section>

    </div>

    <footer>
        <p>AI Studio 项目计划 | 产品经理: [彭总] | 开发人员: [王九日、李工], 汇报日期: 预计一周一次周会</p>
    </footer>

    <script>
        // Simple script for active nav link highlighting (optional)
        const navLinks = document.querySelectorAll('nav a');
        const sections = document.querySelectorAll('section');

        // 添加时钟功能
        function updateClock() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const date = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            
            document.querySelector('#clock .date').textContent = `${year}年${month}月${date}日`;
            document.querySelector('#clock .time').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // 初始化时钟并每秒更新
        updateClock();
        setInterval(updateClock, 1000);

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                // Adjust threshold as needed
                if (pageYOffset >= (sectionTop - sectionHeight / 3)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(a => {
                a.classList.remove('active');
                if (a.getAttribute('href') === `#${current}`) {
                    a.classList.add('active');
                }
            });
        });
    </script>

</body>
</html>